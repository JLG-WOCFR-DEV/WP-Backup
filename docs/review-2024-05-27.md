# Revue du plugin Backup JLG

Cette note Ã©tait initialement datÃ©e du 27Â maiÂ 2024. Les points suivants tracent l'Ã©volution depuis cette revue et les nouveaux sujets Ã  surveiller.

## âœ… ProblÃ¨mes rÃ©solus depuis la revue initiale
- **CapacitÃ©s respectÃ©es partout**Â : les handlers AJAX et REST sensibles appellent dÃ©sormais `bjlg_can_manage_plugin()`/`bjlg_get_required_capability()` au lieu de supposer `manage_options`, ce qui redonne la main aux rÃ´les personnalisÃ©s.ã€F:backup-jlg/includes/class-bjlg-settings.phpâ€ L844-L940ã€‘
- **Valeurs par dÃ©faut consolidÃ©es**Â : le tableau `$default_settings` est unifiÃ© et les sections dropbox/onedrive/pcloud ne sont plus dupliquÃ©es, Ã©vitant tout Ã©crasement silencieux.ã€F:backup-jlg/includes/class-bjlg-settings.phpâ€ L31-L118ã€‘
- **Chart.js livrÃ© en local**Â : `enqueue_admin_assets()` rÃ©fÃ©rence `assets/js/vendor/chart.umd.min.js` empaquetÃ© dans le plugin et versionnÃ© via `filemtime()`, supprimant la dÃ©pendance CDN soulevÃ©e lors de la revue.ã€F:backup-jlg/backup-jlg.phpâ€ L256-L289ã€‘
- **Fallback CSS explicite**Â : chaque rÃ¨gle utilisant `color-mix()` conserve une dÃ©claration `border` classique juste avant, assurant un rendu correct sur les navigateurs dÃ©pourvus de ce support.ã€F:backup-jlg/assets/css/admin.cssâ€ L133-L152ã€‘
- **ObservabilitÃ© des files**Â : le tableau de bord expose dÃ©sormais les files de purge distante et de notifications (volumÃ©trie, prochaines tentatives, erreurs) via un panneau dÃ©diÃ©, ce qui rÃ©pond au manque de monitoring remontÃ© lors de la revue.ã€F:backup-jlg/includes/class-bjlg-admin.phpâ€ L365-L459ã€‘ã€F:backup-jlg/includes/class-bjlg-admin-advanced.phpâ€ L43-L231ã€‘ã€F:backup-jlg/assets/css/admin.cssâ€ L312-L404ã€‘

## ğŸš§ Points de vigilance actuels
- **Purge distante perfectible**Â : le worker `BJLG_Remote_Purge_Worker` traite bien la file `bjlg_process_remote_purge_queue`, mais ne gÃ¨re ni backoff exponentiel, ni seuil maximal d'essais, ni alerte UI dÃ©diÃ©e. Les entrÃ©es en Ã©chec risquent donc de tourner en boucle sans visibilitÃ© cÃ´tÃ© admin.ã€F:backup-jlg/includes/class-bjlg-remote-purge-worker.phpâ€ L12-L166ã€‘
- **Canaux de notification limitÃ©s**Â : seul le trio email/Slack/Discord dispose dâ€™un transport dÃ©diÃ© dans `BJLG_Notification_Transport`. Avant de communiquer sur Telegram, SMS ou dâ€™autres chatops, prÃ©voir lâ€™implÃ©mentation correspondante pour Ã©viter les gaps fonctionnels.ã€F:backup-jlg/includes/class-bjlg-notification-transport.phpâ€ L13-L154ã€‘ã€F:backup-jlg/includes/class-bjlg-settings.phpâ€ L40-L115ã€‘
- ~~**Absence de monitoring de file**Â : ni la queue des notifications (`bjlg_notification_queue`) ni celle de purge distante ne disposent dâ€™un Ã©cran de suivi (nombre dâ€™entrÃ©es, dernier Ã©chec, prochain passage). Ajouter un widget dâ€™observation faciliterait le debug en production et alignerait le plugin sur les consoles pro.~~ âœ… RÃ©solu par le panneau Â«Â Files dâ€™attenteÂ Â» du tableau de bord dÃ©crit ci-dessus.ã€F:backup-jlg/includes/class-bjlg-admin.phpâ€ L365-L459ã€‘

## Actions recommandÃ©es
1. ImplÃ©menter un mÃ©canisme de retries graduels + seuil dâ€™abandon cÃ´tÃ© purge distante, avec alerting (mail/webhook) lorsque le nombre dâ€™essais dÃ©passe la limite.
2. Masquer ou dÃ©sactiver les canaux non implÃ©mentÃ©s dans lâ€™UI tant que le transport nâ€™est pas livrÃ©, ou prioriser leur dÃ©veloppement pour aligner la promesse produit sur la rÃ©alitÃ© technique.
3. Ã‰tendre le panneau Â«Â Files dâ€™attenteÂ Â» avec des actions correctives (relance manuelle, purge dâ€™une entrÃ©e) et des notifications automatiques en cas de saturation.
